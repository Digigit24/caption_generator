<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ScribeFlow | AI Caption Generator</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
      tailwind.config = {
        theme: {
          extend: {
            colors: {
              zinc: { 850: "#1f1f22", 950: "#09090b" },
              violet: { 500: "#8b5cf6", 600: "#7c3aed" },
            },
            fontFamily: { sans: ["Inter", "sans-serif"] },
          },
        },
      };
    </script>
    <link rel="stylesheet" href="css/style.css" />
    <link rel="preconnect" href="https://fonts.googleapis.com" />
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin />
    <link
      href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700&display=swap"
      rel="stylesheet"
    />
    <link
      rel="icon"
      type="image/svg+xml"
      href="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 100 100'><text y='.9em' font-size='90'>üìù</text></svg>"
    />
  </head>
  <body>
    <div class="container">
      <!-- Header -->
      <header class="header">
        <div
          style="
            display: flex;
            justify-content: space-between;
            align-items: center;
            width: 100%;
            margin-bottom: 2rem;
          "
        >
          <!-- System Status -->
          <div
            id="queueInfo"
            class="badge active"
            style="
              display: inline-flex;
              align-items: center;
              gap: 0.5rem;
              background: rgba(16, 185, 129, 0.1);
              color: #34d399;
            "
          >
            <div class="status-dot-pulse"></div>
            <span id="queueText">System Online</span>
          </div>

          <!-- History Button -->
          <button
            class="btn icon-btn"
            onclick="toggleHistory()"
            aria-label="History"
          >
            <svg
              class="icon-svg"
              viewBox="0 0 24 24"
              fill="none"
              stroke="currentColor"
              stroke-width="2"
            >
              <path
                d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"
                stroke-linecap="round"
                stroke-linejoin="round"
              />
            </svg>
            <span>History</span>
          </button>
        </div>

        <h1 class="title">ScribeFlow</h1>
        <p class="subtitle">Professional AI-Powered Video Captioning</p>
      </header>

      <!-- History Section -->
      <div id="historySection" style="display: none; margin-bottom: 2rem">
        <h2 style="margin-bottom: 1rem">Recent Transcriptions</h2>
        <div
          id="historyList"
          style="display: flex; flex-direction: column; gap: 0.5rem"
        >
          <!-- History items will be injected here -->
        </div>
        <button class="btn" onclick="toggleHistory()" style="margin-top: 1rem">
          Close
        </button>
      </div>

      <!-- Custom Confirm Modal -->
      <div id="confirmModal" class="modal-overlay" style="display: none">
        <div class="modal">
          <h3 class="modal-title">Cancel Processing?</h3>
          <p class="modal-text">
            This will stop the current transcription status. Active progress
            will be lost.
          </p>
          <div class="modal-actions">
            <button class="btn" onclick="closeConfirmModal()">
              No, Keep it
            </button>
            <button class="btn danger" onclick="confirmCancelProcess()">
              Yes, Cancel
            </button>
          </div>
        </div>
      </div>

      <!-- Main Upload Section -->
      <main id="mainContent">
        <!-- Main Upload Section -->
        <section class="card upload-card">
          <!-- Language Selection (Now Outside Dropzone) -->
          <div class="input-group">
            <label for="languageSelect" class="input-label"
              >Output Language</label
            >
            <div class="select-wrapper">
              <select id="languageSelect">
                <option value="english">English</option>
                <option value="hindi">Hindi (Roman)</option>
                <option value="marathi">Marathi</option>
                <option value="hinglish">Hinglish</option>
              </select>
              <svg
                class="select-icon"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path d="M6 9l6 6 6-6" />
              </svg>
            </div>
          </div>

          <!-- Drag & Drop Zone -->
          <div id="dropZone" class="drop-zone">
            <input type="file" id="fileInput" accept="video/*" hidden />
            <div class="drop-content">
              <svg
                class="icon-xl"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="1.5"
              >
                <path
                  d="M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <p class="drop-title">Upload Video</p>
              <p class="drop-subtitle">Drag & drop or click to browse</p>
              <p class="drop-info">MP4, MOV, MKV (Max 2GB)</p>
            </div>
          </div>
        </section>

        <!-- Error Message -->
        <div
          id="errorContainer"
          class="error-banner"
          style="display: none"
        ></div>

        <!-- Processing Status -->
        <section id="processCard" class="card process-card">
          <div class="process-header">
            <div class="file-details">
              <svg
                class="icon-sm pulse"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M15 10l4.553-2.276A1 1 0 0121 8.618v6.764a1 1 0 01-1.447.894L15 14M5 18h8a2 2 0 002-2V8a2 2 0 00-2-2H5a2 2 0 00-2 2v8a2 2 0 002 2z"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              <span id="videoName" class="filename">video.mp4</span>
            </div>
            <div class="process-actions">
              <span id="statusBadge" class="badge">Waiting...</span>
              <button
                class="btn-icon danger"
                onclick="cancelProcess()"
                title="Cancel"
              >
                <svg
                  viewBox="0 0 24 24"
                  fill="none"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path d="M6 18L18 6M6 6l12 12" />
                </svg>
              </button>
            </div>
          </div>

          <div class="progress-track">
            <div id="progressBar" class="progress-fill"></div>
          </div>

          <!-- Steps Timeline -->
          <div class="timeline">
            <div class="step" id="stepUpload">
              <div class="dot"></div>
              <span class="label">Upload</span>
            </div>
            <div class="step" id="stepExtract">
              <div class="dot"></div>
              <span class="label">Extract</span>
            </div>
            <div class="step" id="stepChunks">
              <div class="dot"></div>
              <span class="label">Chunk</span>
            </div>
            <div class="step" id="stepTranscribe">
              <div class="dot"></div>
              <span class="label">Transcribe</span>
            </div>
            <div class="step" id="stepFinalize">
              <div class="dot"></div>
              <span class="label">Done</span>
            </div>
          </div>
        </section>

        <!-- Results -->
        <div id="resultsSection" class="results-section">
          <!-- Animated Checkmark -->
          <div class="success-anim">
            <svg
              class="checkmark"
              xmlns="http://www.w3.org/2000/svg"
              viewBox="0 0 52 52"
            >
              <circle
                class="checkmark__circle"
                cx="26"
                cy="26"
                r="25"
                fill="none"
              />
              <path
                class="checkmark__check"
                fill="none"
                d="M14.1 27.2l7.1 7.2 16.7-16.8"
              />
            </svg>
          </div>
          <h2>Captions Ready</h2>
          <p class="subtitle">
            Transcription complete. Choose a format to download.
          </p>

          <div class="download-grid">
            <button class="btn btn-primary" onclick="downloadCaption('srt')">
              <svg
                class="icon-svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              .SRT
            </button>
            <button class="btn" onclick="downloadCaption('vtt')">
              <svg
                class="icon-svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              .VTT
            </button>
            <button class="btn" onclick="downloadCaption('sbv')">
              <svg
                class="icon-svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              .SBV
            </button>
          </div>

          <!-- Transcription Preview -->
          <div
            style="
              margin-top: 2rem;
              display: flex;
              flex-direction: column;
              align-items: center;
            "
          >
            <h3
              style="
                margin-bottom: 0.5rem;
                font-size: 1rem;
                color: var(--text-dim);
                display: flex;
                align-items: center;
                gap: 0.5rem;
              "
            >
              <svg
                class="icon-svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              Transcription Preview
            </h3>
            <div id="transcriptionPreview" class="preview-box">
              <span style="color: var(--text-dim); font-style: italic"
                >Loading preview...</span
              >
            </div>
          </div>

          <div style="margin-top: 2rem">
            <button class="btn" onclick="resetUI()">
              <svg
                class="icon-svg"
                viewBox="0 0 24 24"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
              >
                <path
                  d="M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"
                  stroke-linecap="round"
                  stroke-linejoin="round"
                />
              </svg>
              Transcribe Another
            </button>
          </div>
        </div>
      </main>

      <!-- Footer -->
    </div>

    <script src="js/app.js"></script>
  </body>
</html>
